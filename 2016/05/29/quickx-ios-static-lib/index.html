<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="亲爱的, 打完这个包就回家">
<meta property="og:type" content="article">
<meta property="og:title" content="quick-x 使用静态库加速 iOS 打包">
<meta property="og:url" content="http://blog.justbilt.com/2016/05/29/quickx-ios-static-lib/index.html">
<meta property="og:site_name" content="I'm bilt.">
<meta property="og:description" content="亲爱的, 打完这个包就回家">
<meta property="og:image" content="http://static.zybuluo.com/justbilt/i0vtatej9k1wx2d9ck8fmqhy/QQ20160529-0.png">
<meta property="og:image" content="http://static.zybuluo.com/justbilt/3d9eiua1tind8aycakjwymgl/QQ20160529-1.png">
<meta property="og:image" content="http://static.zybuluo.com/justbilt/5g1o6ozh1j4dlybcjftfybnr/QQ20160529-3.png">
<meta property="og:updated_time" content="2017-03-12T02:22:53.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="quick-x 使用静态库加速 iOS 打包">
<meta name="twitter:description" content="亲爱的, 打完这个包就回家">
    
    
        
          
              <link rel="shortcut icon" href="/favicon/favicon.png">
          
        
        
          
            <link rel="icon" type="image/png" href="/favicon/favicon.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/favicon/favicon.png">
          
        
    
    <!-- title -->
    <title>quick-x 使用静态库加速 iOS 打包</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css" type="text/css">
    <!-- rss -->
    
    
</head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/justbilt">Projects</a></li>
         
          <li><a href="/atom.xml">Feed</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2016/06/19/quickx-ipv6/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li>
        
        
        <li><a class="icon" href="/2016/05/08/compress-res/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://blog.justbilt.com/2016/05/29/quickx-ios-static-lib/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://blog.justbilt.com/2016/05/29/quickx-ios-static-lib/&text=quick-x 使用静态库加速 iOS 打包"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://blog.justbilt.com/2016/05/29/quickx-ios-static-lib/&title=quick-x 使用静态库加速 iOS 打包"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://blog.justbilt.com/2016/05/29/quickx-ios-static-lib/&is_video=false&description=quick-x 使用静态库加速 iOS 打包"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=quick-x 使用静态库加速 iOS 打包&body=Check out this article: http://blog.justbilt.com/2016/05/29/quickx-ios-static-lib/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://blog.justbilt.com/2016/05/29/quickx-ios-static-lib/&title=quick-x 使用静态库加速 iOS 打包"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://blog.justbilt.com/2016/05/29/quickx-ios-static-lib/&title=quick-x 使用静态库加速 iOS 打包"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://blog.justbilt.com/2016/05/29/quickx-ios-static-lib/&title=quick-x 使用静态库加速 iOS 打包"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://blog.justbilt.com/2016/05/29/quickx-ios-static-lib/&title=quick-x 使用静态库加速 iOS 打包"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://blog.justbilt.com/2016/05/29/quickx-ios-static-lib/&name=quick-x 使用静态库加速 iOS 打包&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#u4E00-__u7F16_u8BD1_u9759_u6001_u5E93"><span class="toc-number">1.</span> <span class="toc-text">一. 编译静态库</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#u4E8C-__u4F7F_u7528_u9759_u6001_u5E93"><span class="toc-number">2.</span> <span class="toc-text">二. 使用静态库</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-__u79FB_u9664_Tgarget_Dependencise"><span class="toc-number">2.1.</span> <span class="toc-text">1. 移除 Tgarget Dependencise</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-__u6DFB_u52A0_Other_Linker_Flags"><span class="toc-number">2.2.</span> <span class="toc-text">2. 添加 Other Linker Flags</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#u4E09-__u5176_u4ED6"><span class="toc-number">3.</span> <span class="toc-text">三. 其他</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-__u8C03_u8BD5_u73AF_u5883_u4E0E_u751F_u4EA7_u73AF_u5883"><span class="toc-number">3.1.</span> <span class="toc-text">1. 调试环境与生产环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-__u751F_u4EA7_u73AF_u5883_u5DE5_u7A0B_u7626_u8EAB"><span class="toc-number">3.2.</span> <span class="toc-text">2. 生产环境工程瘦身</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-__u8FDB_u4E00_u6B65_u52A0_u901F_u7F16_u8BD1"><span class="toc-number">3.3.</span> <span class="toc-text">3. 进一步加速编译</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-__u9759_u6001_u5E93_u6587_u4EF6_u7684_u7248_u672C_u7BA1_u7406"><span class="toc-number">3.4.</span> <span class="toc-text">4. 静态库文件的版本管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-__u7F16_u8BD1_u811A_u672C_u4F18_u5316__3F"><span class="toc-number">3.5.</span> <span class="toc-text">5. 编译脚本优化 ?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-__u6700_u7EC8_Archive__u51FA_u7684_u5305_u4F1A_u6BD4_u4F7F_u7528_u6E90_u6587_u4EF6_u5927__3F"><span class="toc-number">3.6.</span> <span class="toc-text">6. 最终 Archive 出的包会比使用源文件大 ?</span></a></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        quick-x 使用静态库加速 iOS 打包
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">I'm bilt.</span>
      </span>
      
    <div class="postdate">
        <time datetime="2016-05-29T13:20:58.000Z" itemprop="datePublished">2016-05-29</time>
    </div>


      
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Quick-Cocos2d-x/">Quick-Cocos2d-x</a>, <a class="tag-link" href="/tags/iOS/">iOS</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>quick-x 项目的 iOS 工程使用 <code>Tgarget Dependencise</code> 依赖 <code>cocos2d_lib</code> 和 <code>cocos_lua_bindings</code> 工程.</p>
<p><img src="http://static.zybuluo.com/justbilt/i0vtatej9k1wx2d9ck8fmqhy/QQ20160529-0.png" alt="QQ20160529-0.png-27kB"></p>
<p>这样子在 iOS Archive 时会重新编译这两个项目, 十分痛苦, 尤其是一次出七八个渠道的包, 好几个小时就耗在里面了.</p>
<p>为什么不用静态库, 编译出 .a , 使用时直接链接就可以了嘛.</p>
<h1 id="u4E00-__u7F16_u8BD1_u9759_u6001_u5E93"><a href="#u4E00-__u7F16_u8BD1_u9759_u6001_u5E93" class="headerlink" title="一. 编译静态库"></a>一. 编译静态库</h1><p>找了一下, 原来早已经有小伙伴想到了这点, 这篇文章 <a href="http://www.nicnocquee.com/2016/01/20/build-cocos2d-x-fat-static-library.html" target="_blank" rel="external">Build cocos2d-x fat static library</a> 就特别棒. 从中我们可以发现一个特别有用的脚本 <a href="https://gist.github.com/nicnocquee/9dc4c4a128d7c0bafe23#file-buildstaticlib-sh" target="_blank" rel="external">buildstaticlib.sh</a>, 可以直接使用 xcode 工程编译出静态库.</p>
<p>不过这个脚本只能编译出 <code>Release</code> 版, 我修改下可以传入 <code>configuration</code>, 这样我们可以分别编译出 Debug 和 Release 版的静态库啦, 我修改后的<a href="https://gist.github.com/justbilt/903ef34b568527d57c9bd9bf4069ed72" target="_blank" rel="external">文件在这里</a>.</p>
<p>因为我们要编译出多个静态库, 所有又写了另一个脚本 <code>build.sh</code> 调用 <code>buildstaticlib.sh</code> , 内容如下:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">./buildstaticlib.sh <span class="variable">$QUICK_V3_ROOT</span>/cocos/scripting/lua-bindings/proj.ios_mac/cocos2d_lua_bindings.xcodeproj <span class="string">"libluacocos2d iOS"</span> <span class="string">"Release"</span></span><br><span class="line"></span><br><span class="line">./buildstaticlib.sh <span class="variable">$QUICK_V3_ROOT</span>/build/cocos2d_libs.xcodeproj <span class="string">"libcocos2d iOS"</span> <span class="string">"Release"</span></span><br><span class="line"></span><br><span class="line">./buildstaticlib.sh <span class="variable">$QUICK_V3_ROOT</span>/cocos/scripting/lua-bindings/proj.ios_mac/cocos2d_lua_bindings.xcodeproj <span class="string">"libluacocos2d iOS"</span> <span class="string">"Debug"</span></span><br><span class="line"></span><br><span class="line">./buildstaticlib.sh <span class="variable">$QUICK_V3_ROOT</span>/build/cocos2d_libs.xcodeproj <span class="string">"libcocos2d iOS"</span> <span class="string">"Debug"</span></span><br></pre></td></tr></table></figure>
<p>运行成功后会在当前目录生成 4 个 .a 文件, 下一步中将会用到.<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── build.sh</span><br><span class="line">├── buildstaticlib.sh</span><br><span class="line">├── libcocos2d\ iOS-debug.a</span><br><span class="line">├── libcocos2d\ iOS.a</span><br><span class="line">├── libluacocos2d\ iOS-debug.a</span><br><span class="line">└── libluacocos2d\ iOS.a</span><br></pre></td></tr></table></figure></p>
<h1 id="u4E8C-__u4F7F_u7528_u9759_u6001_u5E93"><a href="#u4E8C-__u4F7F_u7528_u9759_u6001_u5E93" class="headerlink" title="二. 使用静态库"></a>二. 使用静态库</h1><p>使用 XCode 打开 <code>proj.ios_mac</code> 目录下的 <code>xxx.xcodeproj</code> 工程.</p>
<h2 id="1-__u79FB_u9664_Tgarget_Dependencise"><a href="#1-__u79FB_u9664_Tgarget_Dependencise" class="headerlink" title="1. 移除 Tgarget Dependencise"></a>1. 移除 Tgarget Dependencise</h2><p>首先移除对 <code>cocos2d_lib</code> 和 <code>cocos_lua_bindings</code> 工程的依赖, 右键点击 <code>Delete</code> 然后选择 <code>Remove reference</code> 就可以.</p>
<p><img src="http://static.zybuluo.com/justbilt/3d9eiua1tind8aycakjwymgl/QQ20160529-1.png" alt="QQ20160529-1.png-49.2kB"></p>
<h2 id="2-__u6DFB_u52A0_Other_Linker_Flags"><a href="#2-__u6DFB_u52A0_Other_Linker_Flags" class="headerlink" title="2. 添加 Other Linker Flags"></a>2. 添加 Other Linker Flags</h2><p>我们静态库的依赖是在这里添加的, 在 Debug 和 Release 选项中分别加入对应的静态库.<br><img src="http://static.zybuluo.com/justbilt/5g1o6ozh1j4dlybcjftfybnr/QQ20160529-3.png" alt="QQ20160529-3.png-117.8kB"></p>
<p>这样就完成啦, 尝试一下 Archive 的速度吧 !</p>
<h1 id="u4E09-__u5176_u4ED6"><a href="#u4E09-__u5176_u4ED6" class="headerlink" title="三. 其他"></a>三. 其他</h1><h2 id="1-__u8C03_u8BD5_u73AF_u5883_u4E0E_u751F_u4EA7_u73AF_u5883"><a href="#1-__u8C03_u8BD5_u73AF_u5883_u4E0E_u751F_u4EA7_u73AF_u5883" class="headerlink" title="1. 调试环境与生产环境"></a>1. 调试环境与生产环境</h2><p>我们改成静态库后, 调试 cocos 引擎的代码会多有不便, 而且一旦修改了 cocos 的代码, 就得重新生成静态库, 对于开发阶段太不友好了.</p>
<p>我们的解决方案, 就是再建立一个 debug 工程, 这个工程依旧使用依赖项目的方式编译 cocos , 调试流程和以前一致. 上线打包时则使用我们的静态库版本, 多渠道也做在这个工程中, 享受静态库带来的编译加速.</p>
<p>最终我们的目录结构是这个样子的:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── runtime-src</span><br><span class="line">│   ├── Classes</span><br><span class="line">│   ├── proj.android</span><br><span class="line">│   ├── proj.android_no_anysdk</span><br><span class="line">│   ├── proj.android_studio</span><br><span class="line">│   ├── proj.ios_mac</span><br><span class="line">│   ├── proj.win32</span><br><span class="line">│   └── proj.wp8-xaml</span><br><span class="line">└── runtime-src-debug</span><br><span class="line">    ├── Classes</span><br><span class="line">    └── proj.ios_mac</span><br></pre></td></tr></table></figure>
<h2 id="2-__u751F_u4EA7_u73AF_u5883_u5DE5_u7A0B_u7626_u8EAB"><a href="#2-__u751F_u4EA7_u73AF_u5883_u5DE5_u7A0B_u7626_u8EAB" class="headerlink" title="2. 生产环境工程瘦身"></a>2. 生产环境工程瘦身</h2><p>这一步可有可无, 我的代码洁癖又犯了, 所以顺手改了一下. </p>
<p>这时的生产环境除静态库外的内容和调试环境几乎一致, 然而有一些东西是我们用不到的:</p>
<ol>
<li>mac 平台对应的内容</li>
<li>Classes/runtime 下的内容</li>
</ol>
<p>删除这些时改动了 AppDelegate 中的东西, 这也上一步为什么从 <code>runtimes-src</code> 目录复制了一份.</p>
<h2 id="3-__u8FDB_u4E00_u6B65_u52A0_u901F_u7F16_u8BD1"><a href="#3-__u8FDB_u4E00_u6B65_u52A0_u901F_u7F16_u8BD1" class="headerlink" title="3. 进一步加速编译"></a>3. 进一步加速编译</h2><p>这一步我们目前还没有做, 只是一个想法.</p>
<p>修改完使用静态库后, 编译速度得到了很大的提升, 但还没有达到极致, 因为 quick 特有的 c++ 文件还是以文件形式存在于工程中的. 所有 Archive 的时候还是有一百多个源文件需要编译.</p>
<p>如果我们能进一步拆分, 新建一个 lib 工程, 将 quick 的源文件添加和依赖项目添加进去, 我们的游戏只依赖这样的一个静态库, 是否可以达到一个极致的编译速度 ?</p>
<h2 id="4-__u9759_u6001_u5E93_u6587_u4EF6_u7684_u7248_u672C_u7BA1_u7406"><a href="#4-__u9759_u6001_u5E93_u6587_u4EF6_u7684_u7248_u672C_u7BA1_u7406" class="headerlink" title="4. 静态库文件的版本管理"></a>4. 静态库文件的版本管理</h2><p>在编译出 debug 版的静态库之前, 我还有想法将这几个静态库压缩上传到 git 上, 编译出 debug 版之后, 我就一个想法, ignore them !</p>
<p>所以我最终的策略 将这几个 .a 在 git 上忽略掉, 同时在那个目录保留了一个编译脚本, 谁要用到 iOS 项目的时候, 发现没有 .a , 自己运行脚本编译一份就可以啦 !</p>
<h2 id="5-__u7F16_u8BD1_u811A_u672C_u4F18_u5316__3F"><a href="#5-__u7F16_u8BD1_u811A_u672C_u4F18_u5316__3F" class="headerlink" title="5. 编译脚本优化 ?"></a>5. 编译脚本优化 ?</h2><p>现在那个编译脚本会编译出一个 <code>fat</code>(armv7 armv7s arm64 i386 x86_64) 版的静态库, 内部实现其实是编译了好多次, 导致现在编译时间非常长.</p>
<p>思考:</p>
<ol>
<li>是否有必要编出 <code>i386 x86_64</code> 版本 ?</li>
<li>看到虾神的一篇文章貌似说可以以 armv7+arm64, i386+x86_64 组合两次打出所有版本.</li>
</ol>
<h2 id="6-__u6700_u7EC8_Archive__u51FA_u7684_u5305_u4F1A_u6BD4_u4F7F_u7528_u6E90_u6587_u4EF6_u5927__3F"><a href="#6-__u6700_u7EC8_Archive__u51FA_u7684_u5305_u4F1A_u6BD4_u4F7F_u7528_u6E90_u6587_u4EF6_u5927__3F" class="headerlink" title="6. 最终 Archive 出的包会比使用源文件大 ?"></a>6. 最终 Archive 出的包会比使用源文件大 ?</h2><p>看到网上有过这个说法, 我没有在修改前后分别 Archive 对比包体, 不太严谨. </p>
<p>但和我之前某一次的包相比, 只大了几百KB, 还不太确定是不是与使用静态库有关系, 大家在修改时可以注意对比一下.</p>

  </div>
</article>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/justbilt">Projects</a></li>
         
          <li><a href="/atom.xml">Feed</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#u4E00-__u7F16_u8BD1_u9759_u6001_u5E93"><span class="toc-number">1.</span> <span class="toc-text">一. 编译静态库</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#u4E8C-__u4F7F_u7528_u9759_u6001_u5E93"><span class="toc-number">2.</span> <span class="toc-text">二. 使用静态库</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-__u79FB_u9664_Tgarget_Dependencise"><span class="toc-number">2.1.</span> <span class="toc-text">1. 移除 Tgarget Dependencise</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-__u6DFB_u52A0_Other_Linker_Flags"><span class="toc-number">2.2.</span> <span class="toc-text">2. 添加 Other Linker Flags</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#u4E09-__u5176_u4ED6"><span class="toc-number">3.</span> <span class="toc-text">三. 其他</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-__u8C03_u8BD5_u73AF_u5883_u4E0E_u751F_u4EA7_u73AF_u5883"><span class="toc-number">3.1.</span> <span class="toc-text">1. 调试环境与生产环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-__u751F_u4EA7_u73AF_u5883_u5DE5_u7A0B_u7626_u8EAB"><span class="toc-number">3.2.</span> <span class="toc-text">2. 生产环境工程瘦身</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-__u8FDB_u4E00_u6B65_u52A0_u901F_u7F16_u8BD1"><span class="toc-number">3.3.</span> <span class="toc-text">3. 进一步加速编译</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-__u9759_u6001_u5E93_u6587_u4EF6_u7684_u7248_u672C_u7BA1_u7406"><span class="toc-number">3.4.</span> <span class="toc-text">4. 静态库文件的版本管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-__u7F16_u8BD1_u811A_u672C_u4F18_u5316__3F"><span class="toc-number">3.5.</span> <span class="toc-text">5. 编译脚本优化 ?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-__u6700_u7EC8_Archive__u51FA_u7684_u5305_u4F1A_u6BD4_u4F7F_u7528_u6E90_u6587_u4EF6_u5927__3F"><span class="toc-number">3.6.</span> <span class="toc-text">6. 最终 Archive 出的包会比使用源文件大 ?</span></a></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://blog.justbilt.com/2016/05/29/quickx-ios-static-lib/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://blog.justbilt.com/2016/05/29/quickx-ios-static-lib/&text=quick-x 使用静态库加速 iOS 打包"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://blog.justbilt.com/2016/05/29/quickx-ios-static-lib/&title=quick-x 使用静态库加速 iOS 打包"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://blog.justbilt.com/2016/05/29/quickx-ios-static-lib/&is_video=false&description=quick-x 使用静态库加速 iOS 打包"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=quick-x 使用静态库加速 iOS 打包&body=Check out this article: http://blog.justbilt.com/2016/05/29/quickx-ios-static-lib/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://blog.justbilt.com/2016/05/29/quickx-ios-static-lib/&title=quick-x 使用静态库加速 iOS 打包"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://blog.justbilt.com/2016/05/29/quickx-ios-static-lib/&title=quick-x 使用静态库加速 iOS 打包"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://blog.justbilt.com/2016/05/29/quickx-ios-static-lib/&title=quick-x 使用静态库加速 iOS 打包"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://blog.justbilt.com/2016/05/29/quickx-ios-static-lib/&title=quick-x 使用静态库加速 iOS 打包"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://blog.justbilt.com/2016/05/29/quickx-ios-static-lib/&name=quick-x 使用静态库加速 iOS 打包&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick='$("#toc-footer").toggle();return false;'><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick='$("#share-footer").toggle();return false;'><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick='$("#nav-footer").toggle();return false;'><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2017 justbilt
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/justbilt">Projects</a></li>
         
          <li><a href="/atom.xml">Feed</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="/lib/meslo-LG/styles.css" type="text/css">
<link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css" type="text/css">


<!-- jquery -->
<script src="/lib/jquery/jquery.min.js" type="text/javascript"></script>
<script src="/lib/justified-gallery/jquery.justifiedGallery.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>
<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-69555091-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Disqus Comments -->


