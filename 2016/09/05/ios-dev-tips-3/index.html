<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="万一遇上了呢?">
<meta property="og:type" content="article">
<meta property="og:title" content="最近搞 iOS 版遇到的一些问题和技巧 (三)">
<meta property="og:url" content="http://blog.justbilt.com/2016/09/05/ios-dev-tips-3/index.html">
<meta property="og:site_name" content="I'm bilt.">
<meta property="og:description" content="万一遇上了呢?">
<meta property="og:image" content="http://ww2.sinaimg.cn/large/7f870d23gw1f7j62j0mfuj20dw02n3yy.jpg">
<meta property="og:image" content="http://ww2.sinaimg.cn/large/7f870d23gw1f7j665yyacj207901zq32.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/7f870d23gw1f7kanujs5rj20ol018jrf.jpg">
<meta property="og:updated_time" content="2017-03-12T04:19:57.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="最近搞 iOS 版遇到的一些问题和技巧 (三)">
<meta name="twitter:description" content="万一遇上了呢?">
    
    
        
          
              <link rel="shortcut icon" href="/favicon/favicon.png">
          
        
        
          
            <link rel="icon" type="image/png" href="/favicon/favicon.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/favicon/favicon.png">
          
        
    
    <!-- title -->
    <title>最近搞 iOS 版遇到的一些问题和技巧 (三)</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css" type="text/css">
    <!-- rss -->
    
    
</head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/justbilt">Projects</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2016/09/10/quickx-crash-on-phone-2/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li>
        
        
        <li><a class="icon" href="/2016/06/26/terse-lua-code/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://blog.justbilt.com/2016/09/05/ios-dev-tips-3/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://blog.justbilt.com/2016/09/05/ios-dev-tips-3/&text=最近搞 iOS 版遇到的一些问题和技巧 (三)"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://blog.justbilt.com/2016/09/05/ios-dev-tips-3/&title=最近搞 iOS 版遇到的一些问题和技巧 (三)"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://blog.justbilt.com/2016/09/05/ios-dev-tips-3/&is_video=false&description=最近搞 iOS 版遇到的一些问题和技巧 (三)"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=最近搞 iOS 版遇到的一些问题和技巧 (三)&body=Check out this article: http://blog.justbilt.com/2016/09/05/ios-dev-tips-3/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://blog.justbilt.com/2016/09/05/ios-dev-tips-3/&title=最近搞 iOS 版遇到的一些问题和技巧 (三)"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://blog.justbilt.com/2016/09/05/ios-dev-tips-3/&title=最近搞 iOS 版遇到的一些问题和技巧 (三)"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://blog.justbilt.com/2016/09/05/ios-dev-tips-3/&title=最近搞 iOS 版遇到的一些问题和技巧 (三)"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://blog.justbilt.com/2016/09/05/ios-dev-tips-3/&title=最近搞 iOS 版遇到的一些问题和技巧 (三)"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://blog.justbilt.com/2016/09/05/ios-dev-tips-3/&name=最近搞 iOS 版遇到的一些问题和技巧 (三)&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#u4E00-_iOS__u5185_u8D2D_u8FD4_u56DE_u5546_u54C1_u65E0_u6548_invalid_product"><span class="toc-number">1.</span> <span class="toc-text">一. iOS 内购返回商品无效 invalid product</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#u4E8C-_iOS__u8FD0_u884C_u5D29_u6E83_unrecognized_selector_sent_to_instance"><span class="toc-number">2.</span> <span class="toc-text">二. iOS 运行崩溃 unrecognized selector sent to instance</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-__u4FEE_u6539_AppController-h__u4E2D_window__u53D8_u91CF_u7684_u58F0_u660E_u5F62_u5F0F"><span class="toc-number">2.0.0.1.</span> <span class="toc-text">1. 修改 AppController.h 中 window 变量的声明形式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-__u4FEE_u6539_AppController-mm"><span class="toc-number">2.0.0.2.</span> <span class="toc-text">2. 修改 AppController.mm</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#u4E09-__u6E38_u620F_u5728_u4F4E_u4E8E_ios9__u7684_u7CFB_u7EDF_u542F_u52A8_u5D29_u6E83"><span class="toc-number">3.</span> <span class="toc-text">三. 游戏在低于 ios9 的系统启动崩溃</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#u56DB-_Facebook__u767B_u5F55_u5D29_u6E83"><span class="toc-number">4.</span> <span class="toc-text">四. Facebook 登录崩溃</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#u4E94-_ios9__u72B6_u6001_u680F_u65E0_u6CD5_u9690_u85CF"><span class="toc-number">5.</span> <span class="toc-text">五. ios9 状态栏无法隐藏</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#u516D-_showAlert__u8BE1_u5F02_u5D29_u6E83"><span class="toc-number">6.</span> <span class="toc-text">六. showAlert 诡异崩溃</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        最近搞 iOS 版遇到的一些问题和技巧 (三)
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">I'm bilt.</span>
      </span>
      
    <div class="postdate">
        <time datetime="2016-09-05T15:50:12.000Z" itemprop="datePublished">2016-09-05</time>
    </div>


      
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/iOS/">iOS</a>, <a class="tag-link" href="/tags/iOS-Dev-Tips/">iOS-Dev-Tips</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h1 id="u4E00-_iOS__u5185_u8D2D_u8FD4_u56DE_u5546_u54C1_u65E0_u6548_invalid_product"><a href="#u4E00-_iOS__u5185_u8D2D_u8FD4_u56DE_u5546_u54C1_u65E0_u6548_invalid_product" class="headerlink" title="一. iOS 内购返回商品无效 invalid product"></a>一. iOS 内购返回商品无效 invalid product</h1><p>我使用 quick-x 内置的 store 类请求商品信息时, 收到这样的错误:</p>
<blockquote>
<p>nvalidProductIdentifiers [CCStore_obj]<br>[CCStore_obj] productsRequestDidReceiveResponse() invalid pid: com.xxx.xxx</p>
</blockquote>
<p>首先, <strong>检查你请求的商品 id 在 iTunes 后台是否创建</strong>, 是否拼写错误. 如果没有问题, 那么就不太好办了, 会有很多原因导致这个问题.</p>
<p>ZZB_Amoy 博客的<a href="http://blog.sina.com.cn/s/blog_a6a46b330101dgju.html" target="_blank" rel="external">这篇文章</a>总结了下可能的原因, 如下:</p>
<blockquote>
<ul>
<li>创建的App ID是否启用了IAP功能。</li>
<li>商品信息是否配置到iTurn Connect，并到达“Ready to Submit”状态。</li>
<li>在iTurn Connect中创建Test User，并收取邮件激活。之后登录到测试用手机的设置页面中（Store选项）。</li>
<li>App的Bundle Id是否和后台配置的App Id一致。</li>
<li>是否创建相应的provisioning profile，并用此签名App。</li>
<li>iTurn Connect后台配置完商品信息后，是否等待若干小时生效。</li>
<li>SKProductsRequest请求的商品Id必须和iTurn Connect中配置的一致。（如：com.test.product.xxx）</li>
<li>iTunes Connect中配置的银行信息是否正确。</li>
<li>是否先删除旧App，再重新编译生成新的。</li>
<li>请不要使用越狱手机测试。</li>
</ul>
</blockquote>
<p>下面说说我两次遇到这个问题的解决方案:</p>
<ol>
<li>如果游戏发布区域中没有手机中 App Store 当前区的话, 需要先登陆下对应区域创建的测试账号, 将商店切换到对应区域.</li>
<li>完善苹果开发者账号所能完善的信息, 如付款信息呀什么的, 然后莫名其妙就解决了.</li>
<li>商品 id 大小写错误, 在 chrome 搜索时是忽略大小的.</li>
</ol>
<blockquote>
<p>注：在测试阶段，可以不用上传APP软件包，但必须创建测试用Apple Id，并在手机设置中（store选项）登录。</p>
</blockquote>
<h1 id="u4E8C-_iOS__u8FD0_u884C_u5D29_u6E83_unrecognized_selector_sent_to_instance"><a href="#u4E8C-_iOS__u8FD0_u884C_u5D29_u6E83_unrecognized_selector_sent_to_instance" class="headerlink" title="二. iOS 运行崩溃 unrecognized selector sent to instance"></a>二. iOS 运行崩溃 unrecognized selector sent to instance</h1><p>运行游戏过程中收到如下错误:</p>
<blockquote>
<p>[1515:710439] -[AppController window]: unrecognized selector sent to instance 0x2c85c00<br>libc++abi.dylib: terminate_handler unexpectedly threw an exception</p>
</blockquote>
<p>这个在接入某一个平台 sdk 时遇到的问题, 于是便问了下他们的技术, 很快解决了问题. </p>
<h4 id="1-__u4FEE_u6539_AppController-h__u4E2D_window__u53D8_u91CF_u7684_u58F0_u660E_u5F62_u5F0F"><a href="#1-__u4FEE_u6539_AppController-h__u4E2D_window__u53D8_u91CF_u7684_u58F0_u660E_u5F62_u5F0F" class="headerlink" title="1. 修改 AppController.h 中 window 变量的声明形式"></a>1. 修改 AppController.h 中 window 变量的声明形式</h4><p><img src="http://ww2.sinaimg.cn/large/7f870d23gw1f7j62j0mfuj20dw02n3yy.jpg" alt=""></p>
<h4 id="2-__u4FEE_u6539_AppController-mm"><a href="#2-__u4FEE_u6539_AppController-mm" class="headerlink" title="2. 修改 AppController.mm"></a>2. 修改 AppController.mm</h4><p><img src="http://ww2.sinaimg.cn/large/7f870d23gw1f7j665yyacj207901zq32.jpg" alt=""></p>
<p>虽然问题解决了, 但是我并不明白各种缘由. Google 了下, 大概明白了, 原来如此. 从错误中我们可以看到这句 <code>[AppController window]</code> , 从语法来看, 这是要调用 AppController 的 window 函数, 但是在我们之前的写法中没有实现这个函数, 便出错了. 而使用 <code>@property</code> 这个东西, 会自动帮你实现一个 <code>window/setWindow</code> 函数, 这样就不会找不到这个函数了.</p>
<h1 id="u4E09-__u6E38_u620F_u5728_u4F4E_u4E8E_ios9__u7684_u7CFB_u7EDF_u542F_u52A8_u5D29_u6E83"><a href="#u4E09-__u6E38_u620F_u5728_u4F4E_u4E8E_ios9__u7684_u7CFB_u7EDF_u542F_u52A8_u5D29_u6E83" class="headerlink" title="三. 游戏在低于 ios9 的系统启动崩溃"></a>三. 游戏在低于 ios9 的系统启动崩溃</h1><p>这个也是在接入第三方 sdk 时遇到的问题, 游戏一启动就会崩溃, 收到错误如下:</p>
<blockquote>
<p>dyld: Symbol not found: _OBJC<em>CLASS</em>$_SFSafariViewController<br>  Referenced from: /var/mobile/Applications/CF4146B4-3F79-4644-86CA-F19E52E64BAA/superarmoreddivision.app/superarmoreddivision<br>  Expected in: /System/Library/Frameworks/SafariServices.framework/SafariServices<br> in /var/mobile/Applications/CF4146B4-3F79-4644-86CA-F19E52E64BAA/superarmoreddivision.app/superarmoreddivision</p>
</blockquote>
<p>Google 了一下, 没有任何人遇到过这样的问题, 这就十分棘手了, 完全不知从何入手. 经过一番探索, 找到了几个有用的线索:</p>
<ol>
<li>SFSafariViewController 这个类是 ios 9 才引入的, 这和我们已知的信息相符.</li>
<li>所幸的是我们的游戏有多个 Scheme , 每个 Scheme 接入不同的 sdk . 其他的 Scheme 的都可以正常运行.</li>
</ol>
<p>这就可以肯定是某个 sdk 中使用了 <code>SFSafariViewController</code> 这个类, 但是还是没有办法定位是那个 sdk . 我不知道是否有一个命令查找符号引用, 因此只能采用最笨的排除法了, 我将引入的 sdk 依次删除, 看是否能够运行.</p>
<p>最终定位到了某个广告统计 sdk , 在询问其 ios 技术人员后得到了解决方案. 原来他们 sdk 需要<strong>以 <code>optional</code> 的形式引入 <code>SafariServices.framework</code></strong>.</p>
<p><img src="http://ww1.sinaimg.cn/large/7f870d23gw1f7kanujs5rj20ol018jrf.jpg" alt=""></p>
<p>都怪我没有仔细阅读文档, 白白耽误了一段时间, 下次一定要注意!</p>
<h1 id="u56DB-_Facebook__u767B_u5F55_u5D29_u6E83"><a href="#u56DB-_Facebook__u767B_u5F55_u5D29_u6E83" class="headerlink" title="四. Facebook 登录崩溃"></a>四. Facebook 登录崩溃</h1><p>集成 Facebook sdk 时, 调用登录接口游戏就会崩溃, 这个问题 Google 一下就能解决, 解决方案也很简单, 在 Info.plist 中加入下面几行代码即可:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">key</span>&gt;</span>LSApplicationQueriesSchemes<span class="tag">&lt;/<span class="title">key</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">string</span>&gt;</span>fbapi<span class="tag">&lt;/<span class="title">string</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">string</span>&gt;</span>fb-messenger-api<span class="tag">&lt;/<span class="title">string</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">string</span>&gt;</span>fbauth2<span class="tag">&lt;/<span class="title">string</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">string</span>&gt;</span>fbshareextension<span class="tag">&lt;/<span class="title">string</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">array</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Stackoverflow 上的答案可以<a href="http://stackoverflow.com/a/33489214" target="_blank" rel="external">移步这里</a>, Facebook 官网上也<a href="https://developers.facebook.com/docs/ios/ios9" target="_blank" rel="external">给了解答</a>.</p>
<h1 id="u4E94-_ios9__u72B6_u6001_u680F_u65E0_u6CD5_u9690_u85CF"><a href="#u4E94-_ios9__u72B6_u6001_u680F_u65E0_u6CD5_u9690_u85CF" class="headerlink" title="五. ios9 状态栏无法隐藏"></a>五. ios9 状态栏无法隐藏</h1><p>隐藏状态栏在 ios9 上换了一种方式, 还是需要在 Info.plist 中进行配置:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">key</span>&gt;</span>UIStatusBarHidden<span class="tag">&lt;/<span class="title">key</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">true</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">key</span>&gt;</span>UIViewControllerBasedStatusBarAppearance<span class="tag">&lt;/<span class="title">key</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">false</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>Stackoverflow 上的答案可以<a href="http://stackoverflow.com/a/32965748" target="_blank" rel="external">移步这里</a>.</p>
<h1 id="u516D-_showAlert__u8BE1_u5F02_u5D29_u6E83"><a href="#u516D-_showAlert__u8BE1_u5F02_u5D29_u6E83" class="headerlink" title="六. showAlert 诡异崩溃"></a>六. showAlert 诡异崩溃</h1><p>游戏内的一些弹框为了保证在游戏的最上层显示, 偷懒使用了 quick-x 提供的 <code>device.showAlert</code> 接口. showAlert 内部使用 <code>UIAlertView</code> 实现, 运行一直良好, 有一天突然就不行了, 一调用就崩溃. </p>
<p>各种办法都试过了, 网上都说是线程安全问题, 我试了一下各种处理都不行, 打断点跟踪到最底层也无济于事. 几近绝望之时, @bin 的一句话提醒了我:</p>
<blockquote>
<p>会不是屏幕方向的问题 ? </p>
</blockquote>
<p>最终一番尝试, 删除了 <code>RootViewController.mm</code> 中几个屏幕方向相关的函数:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">*/</span><br><span class="line"><span class="comment">// Override to allow orientations other than the default portrait orientation.</span></span><br><span class="line"><span class="comment">// This method is deprecated on ios6</span></span><br><span class="line">- (<span class="built_in">BOOL</span>)shouldAutorotateToInterfaceOrientation:(<span class="built_in">UIInterfaceOrientation</span>)interfaceOrientation &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (ConfigParser::getInstance()-&gt;isLanscape()) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">UIInterfaceOrientationIsLandscape</span>( interfaceOrientation );</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">UIInterfaceOrientationIsPortrait</span>( interfaceOrientation );</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// For ios6, use supportedInterfaceOrientations &amp; shouldAutorotate instead</span></span><br><span class="line">- (<span class="built_in">NSUInteger</span>) supportedInterfaceOrientations&#123;</span><br><span class="line"><span class="preprocessor">#ifdef __IPHONE_6_0</span></span><br><span class="line">    <span class="keyword">if</span> (ConfigParser::getInstance()-&gt;isLanscape()) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">UIInterfaceOrientationMaskLandscape</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">UIInterfaceOrientationMaskPortraitUpsideDown</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="preprocessor">#endif</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">BOOL</span>) shouldAutorotate &#123;</span><br><span class="line">    <span class="keyword">if</span> (ConfigParser::getInstance()-&gt;isLanscape()) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NO</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个 bug 出现之诡异, 解决方案之诡异, 在我遇到的 bug 中也算是很少见了.</p>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>
    </div>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/justbilt">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#u4E00-_iOS__u5185_u8D2D_u8FD4_u56DE_u5546_u54C1_u65E0_u6548_invalid_product"><span class="toc-number">1.</span> <span class="toc-text">一. iOS 内购返回商品无效 invalid product</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#u4E8C-_iOS__u8FD0_u884C_u5D29_u6E83_unrecognized_selector_sent_to_instance"><span class="toc-number">2.</span> <span class="toc-text">二. iOS 运行崩溃 unrecognized selector sent to instance</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-__u4FEE_u6539_AppController-h__u4E2D_window__u53D8_u91CF_u7684_u58F0_u660E_u5F62_u5F0F"><span class="toc-number">2.0.0.1.</span> <span class="toc-text">1. 修改 AppController.h 中 window 变量的声明形式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-__u4FEE_u6539_AppController-mm"><span class="toc-number">2.0.0.2.</span> <span class="toc-text">2. 修改 AppController.mm</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#u4E09-__u6E38_u620F_u5728_u4F4E_u4E8E_ios9__u7684_u7CFB_u7EDF_u542F_u52A8_u5D29_u6E83"><span class="toc-number">3.</span> <span class="toc-text">三. 游戏在低于 ios9 的系统启动崩溃</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#u56DB-_Facebook__u767B_u5F55_u5D29_u6E83"><span class="toc-number">4.</span> <span class="toc-text">四. Facebook 登录崩溃</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#u4E94-_ios9__u72B6_u6001_u680F_u65E0_u6CD5_u9690_u85CF"><span class="toc-number">5.</span> <span class="toc-text">五. ios9 状态栏无法隐藏</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#u516D-_showAlert__u8BE1_u5F02_u5D29_u6E83"><span class="toc-number">6.</span> <span class="toc-text">六. showAlert 诡异崩溃</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://blog.justbilt.com/2016/09/05/ios-dev-tips-3/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://blog.justbilt.com/2016/09/05/ios-dev-tips-3/&text=最近搞 iOS 版遇到的一些问题和技巧 (三)"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://blog.justbilt.com/2016/09/05/ios-dev-tips-3/&title=最近搞 iOS 版遇到的一些问题和技巧 (三)"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://blog.justbilt.com/2016/09/05/ios-dev-tips-3/&is_video=false&description=最近搞 iOS 版遇到的一些问题和技巧 (三)"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=最近搞 iOS 版遇到的一些问题和技巧 (三)&body=Check out this article: http://blog.justbilt.com/2016/09/05/ios-dev-tips-3/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://blog.justbilt.com/2016/09/05/ios-dev-tips-3/&title=最近搞 iOS 版遇到的一些问题和技巧 (三)"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://blog.justbilt.com/2016/09/05/ios-dev-tips-3/&title=最近搞 iOS 版遇到的一些问题和技巧 (三)"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://blog.justbilt.com/2016/09/05/ios-dev-tips-3/&title=最近搞 iOS 版遇到的一些问题和技巧 (三)"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://blog.justbilt.com/2016/09/05/ios-dev-tips-3/&title=最近搞 iOS 版遇到的一些问题和技巧 (三)"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://blog.justbilt.com/2016/09/05/ios-dev-tips-3/&name=最近搞 iOS 版遇到的一些问题和技巧 (三)&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick='$("#toc-footer").toggle();return false;'><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick='$("#share-footer").toggle();return false;'><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick='$("#nav-footer").toggle();return false;'><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2017 justbilt
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/justbilt">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="/lib/meslo-LG/styles.css" type="text/css">
<link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css" type="text/css">


<!-- jquery -->
<script src="/lib/jquery/jquery.min.js" type="text/javascript"></script>
<script src="/lib/justified-gallery/jquery.justifiedGallery.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>
<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-69555091-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'justbilt';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


